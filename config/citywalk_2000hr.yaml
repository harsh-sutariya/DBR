project:
  name: 'CityWalker'  
  run_name: 'train_2000hr_fresh'
  result_dir: 'results'

wandb: true  # Set to false to disable Wandb logging

training:
  batch_size: 4
  max_epochs: 10
  gpus: 4
  amp: true  
  normalize_step_length: true
  resume: false
  direction_loss_weight: 5.0
  feature_loss_weight: 0.1
  test_after_training: true
  quick_debug: false  # Set to true for fast debugging (reduces data, batches, epochs)

scheduler:
  name: 'cosine'
  step_size: 10
  gamma: 0.1

optimizer:
  name: 'adamw'
  lr: 2e-4

model:
  type: 'citywalker_feat'
  do_rgb_normalize: true
  do_resize: true
  obs_encoder:
    type: 'dinov2_vitb14'
    context_size: 5
    crop: [350, 630]
    resize: [350, 630]
    freeze: true
  output_coordinate_repr: 'euclidean'

  cord_embedding:
    type: 'input_target'
    num_freqs: 6
    include_input: true

  encoder_feat_dim: 768

  decoder:
    type: 'attention'
    len_traj_pred: 5
    num_heads: 8
    num_layers: 16
    ff_dim_factor: 4

data:
  type: citywalk_feat
  # Root path to vast storage where datasets are stored
  vast_path: '/vast/hs5580/data/citywalker'
  # Relative paths from vast_path root (videos are directly in citywalk_2min/, poses in citywalk_2min/poses/)
  video_dir: 'citywalk_2min'
  pose_dir: 'citywalk_2min/poses'
  # Depth directory for evaluation metrics (DVR/MDM) - loaded during val/test even when use_dbr: false
  depth_dir: 'depths'
  # Whether to cache depth in memory ('on_the_fly' or 'preload')
  depth_cache_mode: 'on_the_fly'
  
  num_workers: 4  # Reduced for 4-GPU training (8 workers per GPU = 32 total)
  pose_fps: 5
  video_fps: 30
  target_fps: 1
  num_train: 2108  # ~80% of 2635 total pose files
  num_val: 527     # ~20% of 2635 total pose files
  num_test: 0      # No test set (use val for evaluation)
  input_noise: 0.1 # sigma (after normalization)
  search_window: 50 # frames
  arrived_threshold: 5 # num frame
  arrived_prob: 0.3

validation:
  num_visualize: 400
  
testing:
  num_visualize: 400

logging:
  enable_wandb: true  # Set to false to disable Wandb logging
  pbar_rate: 100